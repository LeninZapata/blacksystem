{
  "id": "credential-form",
  "title": "i18n:automation.credentials.form.title",
  "description": "i18n:automation.credentials.form.description",
  "fields": [
    {
      "name": "name",
      "label": "i18n:automation.credentials.field.name",
      "type": "text",
      "required": true,
      "placeholder": "i18n:automation.credentials.field.name_placeholder",
      "validation": "required|min:3|max:200"
    },
    {
      "name": "type",
      "label": "i18n:automation.credentials.field.type",
      "type": "select",
      "required": true,
      "options": [
        {"value": "", "label": "i18n:core.form.select.placeholder"},
        {"value": "ai-agent", "label": "i18n:automation.credentials.type.ai_agent"},
        {"value": "chat", "label": "i18n:automation.credentials.type.chat"},
        {"value": "ad", "label": "i18n:automation.credentials.type.ad"}
      ],
      "validation": "required"
    },
    {
      "name": "ad_type",
      "label": "i18n:automation.credentials.field.ad_type",
      "type": "select",
      "required": true,
      "options": [
        {"value": "", "label": "i18n:core.form.select.placeholder"},
        {"value": "ad-facebook", "label": "i18n:automation.credentials.ad_platform.facebook"},
        {"value": "ad-google", "label": "i18n:automation.credentials.ad_platform.google"},
        {"value": "ad-tiktok", "label": "i18n:automation.credentials.ad_platform.tiktok"}
      ],
      "validation": "required",
      "condition": [
        {"field": "type", "operator": "==", "value": "ad"}
      ],
      "conditionContext": "form"
    },
    {
      "name": "ai_agent",
      "label": "i18n:automation.credentials.field.ai_agent",
      "type": "select",
      "required": true,
      "options": [
        {"value": "", "label": "i18n:core.form.select.placeholder"},
        {"value": "openai", "label": "OpenAI"},
        {"value": "deepseek", "label": "Deepseek"}
      ],
      "validation": "required",
      "condition": [
        {"field": "type", "operator": "==", "value": "ai-agent"}
      ],
      "conditionContext": "form"
    },
    {
      "name": "api_token",
      "label": "i18n:automation.credentials.field.api_token",
      "type": "text",
      "required": true,
      "placeholder": "i18n:automation.credentials.field.api_token_placeholder",
      "validation": "required|min:10",
      "condition": [
        {"field": "type", "operator": "==", "value": "ai-agent"},
        {"field": "type", "operator": "==", "value": "ad"}
      ],
      "conditionContext": "form",
      "conditionLogic": "OR"
    },
    {
      "name": "chat_api",
      "label": "i18n:automation.credentials.field.chat_api",
      "type": "select",
      "required": true,
      "options": [
        {"value": "", "label": "i18n:core.form.select.placeholder"},
        {"value": "evolutionapi", "label": "Evolution API"},
        {"value": "whatsapp-cloud-api", "label": "WhatsApp Cloud API (Facebook)"}
      ],
      "validation": "required",
      "condition": [
        {"field": "type", "operator": "==", "value": "chat"}
      ],
      "conditionContext": "form"
    },
    {
      "name": "chat_config_evolution",
      "type": "grouper",
      "mode": "linear",
      "collapsible": false,
      "openFirst": true,
      "condition": [
        {"field": "type", "operator": "==", "value": "chat"},
        {"field": "chat_api", "operator": "==", "value": "evolutionapi"}
      ],
      "conditionLogic": "AND",
      "conditionContext": "form",
      "groups": [
        {
          "name": "evolution_config",
          "title": "i18n:automation.credentials.field.chat_config",
          "fields": [
            {
              "name": "base_url",
              "label": "i18n:automation.credentials.field.base_url",
              "type": "text",
              "required": true,
              "placeholder": "i18n:automation.credentials.field.base_url_placeholder",
              "validation": "required|url"
            },
            {
              "name": "instance",
              "label": "i18n:automation.credentials.field.instance",
              "type": "text",
              "required": true,
              "placeholder": "i18n:automation.credentials.field.instance_placeholder",
              "validation": "required|min:3|max:100"
            },
            {
              "name": "credential_value",
              "label": "i18n:automation.credentials.field.credential_value",
              "type": "text",
              "required": true,
              "placeholder": "i18n:automation.credentials.field.credential_value_placeholder",
              "validation": "required|min:10"
            }
          ]
        }
      ]
    },
    {
      "name": "chat_config_facebook",
      "type": "grouper",
      "mode": "linear",
      "collapsible": false,
      "openFirst": true,
      "condition": [
        {"field": "type", "operator": "==", "value": "chat"},
        {"field": "chat_api", "operator": "==", "value": "whatsapp-cloud-api"}
      ],
      "conditionLogic": "AND",
      "conditionContext": "form",
      "groups": [
        {
          "name": "facebook_config",
          "title": "i18n:automation.credentials.field.facebook_config",
          "fields": [
            {
              "name": "access_token",
              "label": "i18n:automation.credentials.field.access_token",
              "type": "text",
              "required": true,
              "placeholder": "i18n:automation.credentials.field.access_token_placeholder",
              "validation": "required|min:20"
            },
            {
              "name": "phone_number_id",
              "label": "i18n:automation.credentials.field.phone_number_id",
              "type": "number",
              "required": true,
              "placeholder": "i18n:automation.credentials.field.phone_number_id_placeholder",
              "validation": "required|min:10"
            },
            {
              "name": "business_account_id",
              "label": "i18n:automation.credentials.field.business_account_id",
              "type": "text",
              "required": true,
              "placeholder": "i18n:automation.credentials.field.business_account_id_placeholder",
              "validation": "required|min:10"
            }
          ]
        }
      ]
    }
  ],
  "statusbar": [
    {"name": "cancel", "type": "button", "label": "i18n:core.cancel", "action": "call:ogModal.closeAll", "style": "secondary"},
    {"name": "submit", "type": "button", "label": "i18n:core.save", "action": "submit:credential.save"}
  ]
}