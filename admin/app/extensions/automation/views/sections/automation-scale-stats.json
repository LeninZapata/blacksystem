{
  "id": "automationScaleRules",
  "title": "{i18n:automation.scale_rules.listado.title}",
  "type": "content",
  "styles": [
    "automation/assets/css/scaleRuleStats.css",
    "automation/assets/css/scaleRuleStatsCond.css"
  ],
  "scripts": [
    "https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js",
    "automation/assets/js/scaleRule.js",
    "automation/assets/js/scaleRulePreview.js",
    "automation/assets/js/scaleRuleStatsv2.js",
    "automation/assets/js/budgetAdjust.js",
    "automation/assets/js/budgetResetStats.js"
  ],
  "content": [
    {
      "type": "component",
      "component": "tabs",
      "config": {
        "id": "scale-tabs",
        "preloadAllTabs": false,
        "tabs": [
          {
            "id": "tab-reglas",
            "title": "ğŸ“‹ Reglas",
            "content": [
              {
                "type": "html",
                "content": "<h4>{i18n:automation.scale_rules.listado.header.title}</h4>"
              },
              {
                "type": "html",
                "content": "<div class='og-flex og-gap-sm og-my-2'><button class='btn btn-primary' onclick=\"ogModal.open('automation|forms/scale-rule-formV2', {title: '{i18n:automation.scale_rules.ogModal.new.title}', width: '95%', maxWidth: '1400px', showFooter: false, afterRender: function(formId){scaleRule.openNew(formId);}})\">â• {i18n:core.add}</button><button class='btn btn-secondary' onclick='scaleRule.refresh();ogToast.info(\"{i18n:automation.scale_rules.refresh.success}\")'>ğŸ”„ {i18n:core.refresh}</button></div>"
              },
              {
                "type": "component",
                "component": "datatable",
                "config": {
                  "source": "api/adAutoScale",
                  "columns": [
                    {
                      "id": {
                        "name": "i18n:automation.scale_rules.column.id",
                        "width": "30px",
                        "align": "center",
                        "sortable": true
                      }
                    },
                    {
                      "name": {
                        "name": "i18n:automation.scale_rules.column.name",
                        "format": "scale-rule-name-with-asset",
                        "sortable": true,
                        "width": "240px"
                      }
                    },
                    {
                      "is_active": {
                        "name": "i18n:automation.scale_rules.column.status",
                        "format": "scale-rule-status",
                        "width": "120px",
                        "align": "left",
                        "sortable": false
                      }
                    }
                  ],
                  "actions": {
                    "edit": {
                      "name": "i18n:core.edit",
                      "onclick": "ogModal.open('automation|forms/scale-rule-formV2', {title: '{i18n:automation.scale_rules.ogModal.edit.title}', width: '95%', maxWidth: '1400px', showFooter: false, afterRender: function(formId){scaleRule.openEdit(formId, {id});}})"
                    },
                    "clone": {
                      "name": "i18n:automation.scale_rules.action.clone",
                      "onclick": "ogModal.open('automation|forms/scale-rule-clone-form', {title: '{i18n:automation.scale_rules.ogModal.clone.title}', width: '90%', maxWidth: '600px', showFooter: false, afterRender: function(formId){scaleRule.openClone(formId, {id});}})"
                    },
                    "delete": {
                      "name": "i18n:core.delete",
                      "onclick": "if(confirm('{i18n:automation.scale_rules.confirm.delete}')) scaleRule.delete({id}).then(r => r && scaleRule.refresh())"
                    }
                  }
                }
              }
            ]
          },
          {
            "id": "tab-stats-v2",
            "title": "ğŸ“ˆ Mov. Escala",
            "onLoad": "scaleRuleStatsv2.init()",
            "content": [
              {
                "type": "html",
                "content": "<div class='og-bg-gray-100 og-px-2 og-p-1 og-rounded-lg og-mb-1'><h3 class='og-mt-0 og-mb-2 og-text-gray-800'>ğŸ” Filtros</h3><form id='scale-filters-v2-form' class='og-form-group'><div class='og-mb-2'><label for='filter-asset-v2' class='og-mb-1'>ğŸ¬ Activo Publicitario</label><div class='og-flex og-gap-sm og-items-end'><select id='filter-asset-v2' class='form-control' onchange='scaleRuleStatsv2.onAssetChange(this.value)' style='flex: 1;'><option value=''>Selecciona un activo...</option></select><button type='button' class='btn btn-secondary' onclick='scaleRuleStatsv2.openBudgetAdjustModal()' title='Ajustar presupuesto del activo seleccionado'>ğŸ’° Ajustar Presupuesto</button></div></div><div><label class='og-mb-1'>ğŸ“… Rango de Fechas</label><div class='btn-group og-flex og-wrap' role='group'><input type='radio' name='scale_date_range' id='scale-range-today' value='today' class='btn-group-input' checked><label for='scale-range-today' class='btn btn-group-item btn-sm'>Hoy</label><input type='radio' name='scale_date_range' id='scale-range-yesterday' value='yesterday' class='btn-group-input'><label for='scale-range-yesterday' class='btn btn-group-item btn-sm'>Ayer</label><input type='radio' name='scale_date_range' id='scale-range-yesterday-today' value='yesterday_today' class='btn-group-input'><label for='scale-range-yesterday-today' class='btn btn-group-item btn-sm'>Ayer y Hoy</label><input type='radio' name='scale_date_range' id='scale-range-3days' value='last_3_days' class='btn-group-input'><label for='scale-range-3days' class='btn btn-group-item btn-sm'>Hace 3 dÃ­as</label><input type='radio' name='scale_date_range' id='scale-range-7days' value='last_7_days' class='btn-group-input'><label for='scale-range-7days' class='btn btn-group-item btn-sm'>Hace 7 dÃ­as</label><input type='radio' name='scale_date_range' id='scale-range-15days' value='last_15_days' class='btn-group-input'><label for='scale-range-15days' class='btn btn-group-item btn-sm'>Hace 15 dÃ­as</label><input type='radio' name='scale_date_range' id='scale-range-this-month' value='this_month' class='btn-group-input'><label for='scale-range-this-month' class='btn btn-group-item btn-sm'>Este mes</label><input type='radio' name='scale_date_range' id='scale-range-30days' value='last_30_days' class='btn-group-input'><label for='scale-range-30days' class='btn btn-group-item btn-sm'>Hace 30 dÃ­as</label><input type='radio' name='scale_date_range' id='scale-range-custom' value='custom_date' class='btn-group-input'><label for='scale-range-custom' class='btn btn-group-item btn-sm'>DÃ­a especÃ­fico</label></div><div id='scale-custom-date-container' style='display:none; margin-top: 0.75rem;'><label class='og-mb-1'>ğŸ“… Selecciona una fecha</label><input type='date' id='scale-custom-date-input' class='form-control' style='max-width: 200px;'></div></div></form></div>"
              },
              {
                "type": "html",
                "content": "<div id='scale-stats-container-v2' class=''><p class='og-text-center og-text-gray-500 og-p-4'>Selecciona un activo publicitario para ver las estadÃ­sticas</p></div>"
              }
            ]
          },
          {
            "id": "tab-budget-resets",
            "title": "ğŸ”„ Mov. Reseteo Presup.",
            "onLoad": "budgetResetStats.init()",
            "content": [
              {
                "type": "html",
                "content": "<div class='og-bg-gray-100 og-px-2 og-p-1 og-rounded-lg og-mb-1'><h3 class='og-mt-0 og-mb-2 og-text-gray-800'>ğŸ” Filtros</h3><form id='budget-reset-filters-form' class='og-form-group'><div class='og-mb-2'><label for='filter-asset-reset' class='og-mb-1'>ğŸ¬ Activo Publicitario</label><div class='og-flex og-gap-sm og-items-end'><select id='filter-asset-reset' class='form-control' onchange='budgetResetStats.onAssetChange(this.value)' style='flex: 1;'><option value=''>Selecciona un activo...</option></select></div></div><div><label class='og-mb-1'>ğŸ“… Rango de Fechas</label><div class='btn-group og-flex og-wrap' role='group'><input type='radio' name='reset_date_range' id='reset-range-yesterday-today' value='yesterday_today' class='btn-group-input' checked><label for='reset-range-yesterday-today' class='btn btn-group-item btn-sm'>Ayer y Hoy</label><input type='radio' name='reset_date_range' id='reset-range-3days' value='last_3_days' class='btn-group-input'><label for='reset-range-3days' class='btn btn-group-item btn-sm'>Hace 3 dÃ­as</label><input type='radio' name='reset_date_range' id='reset-range-7days' value='last_7_days' class='btn-group-input'><label for='reset-range-7days' class='btn btn-group-item btn-sm'>Hace 7 dÃ­as</label><input type='radio' name='reset_date_range' id='reset-range-15days' value='last_15_days' class='btn-group-input'><label for='reset-range-15days' class='btn btn-group-item btn-sm'>Hace 15 dÃ­as</label><input type='radio' name='reset_date_range' id='reset-range-this-month' value='this_month' class='btn-group-input'><label for='reset-range-this-month' class='btn btn-group-item btn-sm'>Este mes</label><input type='radio' name='reset_date_range' id='reset-range-30days' value='last_30_days' class='btn-group-input'><label for='reset-range-30days' class='btn btn-group-item btn-sm'>Hace 30 dÃ­as</label><input type='radio' name='reset_date_range' id='reset-range-custom' value='custom_date' class='btn-group-input'><label for='reset-range-custom' class='btn btn-group-item btn-sm'>DÃ­a especÃ­fico</label></div><div id='reset-custom-date-container' style='display:none; margin-top: 0.75rem;'><label class='og-mb-1'>ğŸ“… Selecciona una fecha</label><input type='date' id='reset-custom-date-input' class='form-control' style='max-width: 200px;'></div></div></form></div>"
              },
              {
                "type": "html",
                "content": "<div id='budget-reset-stats-container' class=''><p class='og-text-center og-text-gray-500 og-p-4'>Selecciona un activo publicitario para ver los reseteos de presupuesto</p></div>"
              }
            ]
          }
        ]
      }
    }
  ]
}