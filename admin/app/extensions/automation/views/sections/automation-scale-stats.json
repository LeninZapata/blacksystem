{
  "id": "automationScaleRules",
  "title": "{i18n:automation.scale_rules.listado.title}",
  "type": "content",
  "styles": ["automation/assets/css/scaleRuleStats.css"],
  "scripts": [
    "automation/assets/js/scaleRule.js",
    "automation/assets/js/scaleRuleStats.js",
    "automation/assets/js/budgetAdjust.js"
  ],
  "content": [
    {
      "type": "component",
      "component": "tabs",
      "config": {
        "id": "scale-tabs",
        "preloadAllTabs": false,
        "tabs": [
          {
            "id": "tab-reglas",
            "title": "ðŸ“‹ Reglas",
            "content": [
              {
                "type": "html",
                "content": "<h4>{i18n:automation.scale_rules.listado.header.title}</h4>"
              },
              {
                "type": "html",
                "content": "<div class='og-flex og-gap-sm og-my-2'><button class='btn btn-primary' onclick=\"ogModal.open('automation|forms/scale-rule-form', {title: '{i18n:automation.scale_rules.ogModal.new.title}', width: '95%', maxWidth: '1400px', showFooter: false, afterRender: function(formId){scaleRule.openNew(formId);}})\">âž• {i18n:core.add}</button><button class='btn btn-secondary' onclick='scaleRule.refresh();ogToast.info(\"{i18n:automation.scale_rules.refresh.success}\")'>ðŸ”„ {i18n:core.refresh}</button></div>"
              },
              {
                "type": "component",
                "component": "datatable",
                "config": {
                  "source": "api/adAutoScale",
                  "columns": [
                    {
                      "id": {
                        "name": "i18n:automation.scale_rules.column.id",
                        "width": "30px",
                        "align": "center",
                        "sortable": true
                      }
                    },
                    {
                      "name": {
                        "name": "i18n:automation.scale_rules.column.name",
                        "format": "scale-rule-name-with-asset",
                        "sortable": true,
                        "width": "240px"
                      }
                    },
                    {
                      "is_active": {
                        "name": "i18n:automation.scale_rules.column.status",
                        "format": "scale-rule-status",
                        "width": "120px",
                        "align": "left",
                        "sortable": false
                      }
                    }
                  ],
                  "actions": {
                    "edit": {
                      "name": "i18n:core.edit",
                      "onclick": "ogModal.open('automation|forms/scale-rule-form', {title: '{i18n:automation.scale_rules.ogModal.edit.title}', width: '95%', maxWidth: '1400px', showFooter: false, afterRender: function(formId){scaleRule.openEdit(formId, {id});}})"
                    },
                    "delete": {
                      "name": "i18n:core.delete",
                      "onclick": "if(confirm('{i18n:automation.scale_rules.confirm.delete}')) scaleRule.delete({id}).then(r => r && scaleRule.refresh())"
                    }
                  }
                }
              }
            ]
          },
          {
            "id": "tab-stats",
            "title": "ðŸ“Š EstadÃ­sticas",
            "onLoad": "scaleRuleStats.init()",
            "content": [
              {
                "type": "html",
                "content": "<div class='view-header'><h2>ðŸ“Š EstadÃ­sticas de Escalado</h2><p>Visualiza cÃ³mo ha cambiado el presupuesto de tus activos publicitarios</p></div>"
              },
              {
                "type": "html",
                "content": "<div class='stats-controls'><select id='asset-selector' class='form-control' onchange='scaleRuleStats.changeAsset(this.value)'><option value=''>Selecciona un activo...</option></select><select id='range-selector-scale' class='form-control' onchange='scaleRuleStats.changeRange(this.value)'><option value='today' selected>Hoy</option><option value='yesterday'>Ayer</option><option value='last_7_days'>Ãšltimos 7 dÃ­as</option><option value='last_15_days'>Ãšltimos 15 dÃ­as</option><option value='last_30_days'>Ãšltimos 30 dÃ­as</option><option value='this_month'>Este mes</option></select><button class='btn btn-primary' onclick='scaleRuleStats.openBudgetAdjustModal()' style='margin-left: 0.5rem;'>ðŸ’° Ajustar Presupuesto</button></div>"
              },
              {
                "type": "html",
                "content": "<div id='chart-budget-changes'></div>"
              },
              {
                "type": "html",
                "content": "<div id='timeline-budget-changes'></div>"
              }
            ]
          }
        ]
      }
    }
  ]
}